!function(t,i,e,n){"use strict";function s(i,e){this.$elem=t(i),this.settings=t.extend({},h,e),this._handleIframeLoad=this._updateSettings.bind(this),this.handleVisibilitychange=this._updateSettings.bind(this),this._handleWindowResize=function(){this.refresh()}.bind(this),this._init()}var a="plugin_backgroundVideo",h={autoResize:!0,autoplay:!1,type:"youtube",mute:null,quality:null},o={youtube:function(t){var i=t.mute;i&&this.contentWindow.postMessage(JSON.stringify({event:"command",func:i?"mute":"unMute"}),"*");var e=t.quality;e&&this.contentWindow.postMessage(JSON.stringify({event:"command",func:"setPlaybackQuality",args:["hd"+e,!0]}),"*"),t.autoplay&&this.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")},vimeo:function(t){var i=t.mute;i&&this.contentWindow.postMessage(JSON.stringify({method:"setVolume",value:i?0:100}),"*"),t.autoplay&&this.contentWindow.postMessage(JSON.stringify({method:"play"}),"*")}};t.extend(s.prototype,{_init:function(){this._resizePlayer(),this._attachEvents()},_updateSettings:function(){var t=this.$elem.find("iframe");o[this.settings.type].call(t.get(0),this.settings)},_resizePlayer:function(){var t=this.$elem.find("iframe"),i=function(){var t=this.$elem.width(),i=this.$elem.height();if(t/1.78<i){var e=Math.ceil(1.78*i);return{width:e,height:i,left:(t-e)/2,top:0}}var n=Math.ceil(t/1.78);return{width:t,height:n,left:0,top:(i-n)/2}}.call(this);t.width(i.width).height(i.height).css({left:i.left,top:i.top})},_attachEvents:function(){this.$elem.find("iframe").on("load",this._handleIframeLoad),t(i).on("visibilitychange",this.handleVisibilitychange),this.settings.autoResize&&t(i).on("resize",this._handleWindowResize)},_detachEvents:function(){this.$elem.find("iframe").off("load",this._handleIframeLoad),t(i).on("visibilitychange",this.handleVisibilitychange),this.settings.autoResize&&t(i).off("resize",this._resizeHandler)},refresh:function(i){this.settings=t.extend({},h,this.settings,i),this._updateSettings(),this._resizePlayer()},destroy:function(){this._detachEvents(),this.$elem.removeData(a),this.$elem=null,this.settings=null,this._handleIframeLoad=null,this._handleWindowResize=null}}),t.fn.backgroundVideo=function(i){if(void 0===i||"object"==typeof i)return this.each(function(){t.data(this,a)||t.data(this,a,new s(this,i))});if("string"==typeof i&&"_"!==i[0]){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,a);n instanceof s&&"function"==typeof n[i]&&n[i].apply(n,e)})}}}(jQuery,window,document);